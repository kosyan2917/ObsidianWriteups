
etcd — это распределённое хранилище ключ-значение, используемое в Kubernetes для хранения всей информации о состоянии кластера. Оно является важнейшим компонентом Control Plane, обеспечивающим надежность, согласованность и отказоустойчивость данных, которые Kubernetes использует для управления своими ресурсами.

Кластер развернут как N нод, в каждый момент времени одна нода является лидером, остальные - последователи.
Все операции идут через лидера. 

Raft - протокол распределенного консенсуса. 
По этому протоколу происходят:
1) Выбор лидера: каждый член начинается в состоянии "последователь". Если он в течение некоторого времени не получил heartbeat от лидера, то его статус меняется на "кандидат", увеличивает свой номер эпохи и рассылает VoteRequest остальным. 
   Если кандидат получает больше половины всех голосов, то он становится лидером.
2) Лог репликация: когда лидеру приходит команда от клиента, то он сохраняет ее в свой лог и затем рассылает остальным членам. После того, как больше половины членов подтвердили сохранение команды, то лидер помечает ее как "commited", а сам применяет ее к свою состоянию и возвращает ответ клиенту. Остальные последователи не применяют эту команду к своему localstorage до тех пор, пока она не будет помечена как commited.
3) Согласованность состояния: если лидер падает, то будет выбран новый лидер с наибольшим логом. Фоловеры могут оставать или отбрасывать неправиьлные логи при конфликте с кандидатом.

Проблемы с производительностью:

1) Каждая операция - это запись на диск. Медленны диск - медленный etcd.
2) Большое хранилище - больше ключей, дольше поиск и снапшоты.
3)  Если много подписчиков и частые изменения - то большая накгрузка на сеть